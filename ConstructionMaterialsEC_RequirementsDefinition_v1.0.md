# **建設資材ECサイト 要件定義書 (提案版 v1.1)**

## 1. はじめに

### 1.1. 本書の位置づけと目的
本書は、新規に立ち上げる建設資材ECサイトの初期提案における要件定義書です。お客様との協議を通じて、本サイトが実現すべき機能、性能、および制約条件を明確化し、今後の開発プロジェクトの基礎とすることを目的とします。
本書は提案段階のものであり、お客様のご要望やご予算に応じて、内容が変更・調整される可能性があることを前提としています。

### 1.2. プロジェクト概要
- **プロジェクト名**: (仮称) 建設資材ECサイト構築プロジェクト
- **サイト概要**: 建設資材の販売に特化したECサイト。幅広い商品ラインナップ（約3,000商品、SKUベースで約40,000）を取り扱い、個人顧客（BtoC）および法人顧客（BtoB）双方に対応する。中古品の取り扱いも予定。
- **主要目標**:
    - 効率的な商品販売チャネルの確立
    - 幅広い顧客層へのリーチ拡大
    - 建設業界特有のニーズに対応した利便性の提供
    - 低予算での初期構築と段階的な機能拡張

### 1.3. 対象読者
- プロジェクト関係者各位
- 開発担当者
- サイト運営担当者

### 1.4. 用語定義
| 用語        | 説明                                                                 |
|-------------|----------------------------------------------------------------------|
| SKU         | Stock Keeping Unit（在庫最小管理単位）。色やサイズ違いなどを区別する単位。 |
| CMS         | Content Management System。ウェブコンテンツを管理・作成するシステム。     |
| BtoB        | Business to Business。企業間取引。                                     |
| BtoC        | Business to Consumer。企業対消費者取引。                               |
| MVP         | Minimum Viable Product。実用最小限の製品。                             |
| API         | Application Programming Interface。ソフトウェア同士が情報をやり取りする仕組み。 |
| オートコンプリート | 文字入力中に検索候補を自動表示する機能。                               |

### 1.5. 前提条件と制約事項
- **予算**: 初期構築費用は可能な限り抑制する。段階的な投資による機能拡張を視野に入れる。
- **納期**: (お客様との協議により決定)
- **技術選定**: 予算、拡張性、運用性を考慮し、最適な技術スタックを選定する。(提案段階では具体的な技術スタックは未定とし、柔軟性を持たせる)
- **既存システム**: (既存の在庫管理システムや顧客管理システム等があれば、その連携方法や移行について協議)

### 1.6. MVP（最小実用製品）の定義
本プロジェクトでは、段階的な開発アプローチを採用し、以下の機能を含むMVPを最初のリリース目標とします。MVPは基本的なECサイト機能を備え、初期運用が可能な最小限の機能セットです。

- **MVPに含まれる機能**:
  - 商品管理の基本機能（商品登録・編集・一覧表示）
  - 基本的な商品検索・カテゴリ表示
  - カート機能（追加・削除・数量変更）
  - シンプルな購入フロー（クレジットカード決済のみ）
  - 基本的な会員登録・ログイン機能
  - 管理者向け注文管理機能
  - 商品詳細表示（画像、説明、価格）
  - 固定ページ（会社概要、利用規約等）
  
- **MVPから除外される機能**（将来のフェーズで実装）:
  - クーポン機能
  - 高度な検索・フィルタリング
  - BtoB特有機能（見積書発行等）
  - ポイント制度
  - メールマガジン配信
  - レビュー機能
  - パーソナライズ機能

## 2. システム概要

### 2.1. システムの目的とゴール
本ECサイトは、以下の目的とゴールを達成することを目指します。
- **販売チャネルの拡大**: オンラインでの建設資材販売を通じて、新たな顧客層を獲得し、売上向上に貢献する。
- **業務効率の向上**: 商品管理、受注管理、顧客管理などの業務をシステム化し、効率化を図る。
- **顧客満足度の向上**: 使いやすいインターフェース、迅速な情報提供、多様な決済手段などを提供し、顧客満足度を高める。
- **BtoB取引の円滑化**: 法人顧客向けの専用機能（特別価格、見積発行など）を提供し、BtoB取引を円滑化する。
- **スケーラビリティの確保**: 将来的な商品数増加、アクセス数増加、機能拡張に対応可能なシステム基盤を構築する。

### 2.2. システム構成概要図（概念レベル）
```mermaid
graph TD
    subgraph "ユーザー層"
        U_BtoC[個人顧客]
        U_BtoB[法人顧客]
    end

    subgraph "ECサイト (本システム)"
        FrontEnd[フロントエンド<br>(商品表示, カート, 会員機能など)]
        BackEnd[バックエンド<br>(商品管理, 受注管理, APIなど)]
        DB[データベース<br>(商品, 顧客, 注文データなど)]
        Admin[管理画面<br>(サイト運営者向け)]
    end

    subgraph "外部連携システム (オプション/将来拡張)"
        PaymentGW[決済代行システム<br>(Stripe, PayJPなど)]
        StockSystem[外部在庫管理システム]
        DeliverySystem[配送連携システム]
        MailService[メール配信サービス]
        AnalyticsTool[分析ツール]
    end

    U_BtoC -- アクセス --> FrontEnd
    U_BtoB -- アクセス --> FrontEnd
    FrontEnd -- データ要求/更新 --> BackEnd
    BackEnd -- データアクセス --> DB
    Admin -- 操作 --> BackEnd
    BackEnd -- 連携 --> PaymentGW
    BackEnd -- 連携 --> StockSystem
    BackEnd -- 連携 --> DeliverySystem
    BackEnd -- 連携 --> MailService
    BackEnd -- データ連携 --> AnalyticsTool

    style FrontEnd fill:#f9f,stroke:#333,stroke-width:2px
    style BackEnd fill:#ccf,stroke:#333,stroke-width:2px
    style DB fill:#lightgrey,stroke:#333,stroke-width:2px
    style Admin fill:#9cf,stroke:#333,stroke-width:2px
```
*(注: 上記は概念図であり、詳細なアーキテクチャは設計フェーズで決定します)*

### 2.3. スコープ
本提案におけるスコープは、以下の通りです。お客様のご予算や優先度に応じて、機能の取捨選択や段階的導入を検討します。

- **初期構築フェーズ (MVP)**: ECサイトとして最低限必要なコア機能を中心に実装します。
    - 商品基本情報表示、カート、基本的な購入フロー、会員登録・ログイン、基本的な商品検索、管理者による商品・受注管理など。
- **拡張フェーズ (オプション/将来検討)**: 顧客体験向上、業務効率化、マーケティング強化のための追加機能を実装します。
    - BtoB対応、パーソナライズ、高度な分析、外部システム連携強化、各種マーケティング機能など。

## 3. 機能要件

以下に、本ECサイトで実現すべき機能要件を記述します。各機能について、概要、詳細要件、および提案時の考慮点（優先度、オプションなど）を示します。

**優先度凡例:**
- **[必須]**: MVPとして初期構築フェーズで実装すべき機能。
- **[推奨]**: 利便性向上や業務効率化のために、初期構築フェーズまたは早期の拡張フェーズで実装が望ましい機能。
- **[オプション]**: 特定のニーズや将来的な拡張として検討可能な機能。

---

### 3.1. 商品管理機能
- **概要**: 商品の登録・編集・削除・在庫管理を行う機能。建設資材の多様なSKUに対応する。
- **詳細要件**:
    - **[必須]** 商品情報登録・編集・削除:
        - 商品名、通常価格、(会員価格/BtoB価格などの表示のための)参考価格（二重価格表示対応）
        - 商品説明（テキスト、画像、動画埋め込みなどに対応可能なリッチテキストエディタを推奨）
        - 商品画像（複数枚登録可能、メイン画像設定、拡大表示）
        - SKU（品番、型番など。SKUごとの価格、在庫、画像設定も考慮）
        - カテゴリ（複数階層対応、複数カテゴリ紐付けも検討）
        - メーカー、ブランド
        - 商品仕様（例: 寸法、重量、材質など。建設資材特有の属性を柔軟に追加できる仕組みを推奨）
        - 中古品フラグ、状態説明（中古品販売の場合）
    - **[必須]** 在庫数管理:
        - SKUごとの在庫数登録・更新
        - 在庫変動履歴（手動更新、注文による自動減算）
        - 在庫僅少・在庫切れアラート（管理者向け）
    - **[必須]** 商品の表示/非表示切替:
        - 管理画面から個別に設定可能
        - 在庫切れ時の自動非表示/「在庫切れ」表示の選択（運用ポリシーによる）
    - **[推奨]** CSVによる商品情報一括登録・更新機能（大量SKU対応のため）
    - **[オプション]** 関連商品・代替商品紐付け機能
- **提案時の考慮点**:
    - SKU数が非常に多いため、管理画面の操作性、一括処理機能が重要。
    - 商品属性の柔軟性（カスタムフィールドなど）を持たせることで、将来的な商品カテゴリ拡大に対応しやすくなります。

---

### 3.2. カート・購入機能・お気に入り登録
- **概要**: ユーザーが商品を選んで購入できる仕組み。中古品販売のための承諾機能を含む。
- **詳細要件**:
    - **[必須]** カート機能:
        - カートへの商品追加・削除・数量変更
        - カート内商品の合計金額表示（税計算含む）
        - 複数商品同時購入に対応
    - **[必須]** カート内容の保持:
        - ログインユーザーの場合はDBに保存し、別デバイスでも復元可能
        - 未ログインユーザーの場合はセッションまたはローカルストレージで一定期間保持
    - **[必須]** 購入フロー:
        - 配送先情報入力・選択（会員の場合は登録住所から選択）
        - 支払い方法選択
        - 注文内容確認画面
        - 注文完了画面、注文完了メール自動送信
    - **[必須]** 承諾機能（中古品など特定商品向け）:
        - 商品ページまたはカート内で、特定条件（例: 中古品の状態、返品不可など）に対する「了承しました」等のチェックボックスを表示
        - チェックがないと購入フローに進めない制御
        - 承諾内容は注文データとして記録
    - **[必須]** 注文ステータス表示（ユーザー向け）:
        - マイページ等で「準備中」「発送中」「発送完了」などの状況を確認可能
    - **[推奨]** お気に入り登録機能:
        - 商品をお気に入りに登録・削除
        - お気に入り一覧表示
    - **[推奨]** クーポン適用機能（詳細は3.13参照）
- **提案時の考慮点**:
    - 購入フローはステップ数を少なくし、離脱を防ぐUI/UXが重要。
    - 承諾機能は、どの商品に適用するかを管理画面で設定できる柔軟性が必要。

---

### 3.3. 決済機能
- **概要**: 購入時にユーザーが代金を支払うための仕組み。
- **詳細要件**:
    - **[必須]** クレジットカード決済:
        - 主要国際ブランド（VISA, MasterCard, JCB, AMEX, Diners）に対応
        - 決済代行サービス（例: Stripe, PayJP, SB Payment Serviceなど）との連携。セキュリティとコストを考慮し選定。
    - **[推奨]** 銀行振込:
        - 振込先口座情報を表示
        - 入金確認後のステータス手動更新（管理者）
    - **[推奨]** コンビニ決済:
        - 決済代行サービス経由で提供
    - **[オプション]** 代金引換:
        - 配送業者との契約が必要
    - **[必須]** 決済完了後の注文データ生成とステータス管理:
        - 決済成功時に注文データを確定し、ステータスを「決済完了」等に更新
        - 決済失敗時のエラーハンドリングとユーザーへの通知
    - **[推奨]** 請求書・納品書自動発行機能:
        - 注文完了時または発送時にPDF形式で自動生成
        - マイページからのダウンロード、またはメール添付
        - 発送時同梱も可能な運用を考慮（PDFを印刷して同梱）
        - インボイス制度対応（適格請求書発行事業者登録番号の記載など）
- **提案時の考慮点**:
    - 決済代行サービスの選定は、手数料、導入の容易さ、サポート体制、BtoB決済への対応度などを総合的に比較検討します。
    - 請求書・納品書のフォーマットは、建設業界の慣習や法的要件（インボイス制度）を考慮する必要があります。

---

### 3.4. 会員機能
- **概要**: ユーザーの登録、ログイン、履歴管理など。
- **詳細要件**:
    - **[必須]** 会員登録/ログイン/ログアウト機能:
        - メールアドレスとパスワードによる認証
        - 会員登録時の入力項目（氏名、住所、電話番号、メールアドレスなど。BtoBの場合は会社名、部署名、担当者名なども考慮）
        - 利用規約、プライバシーポリシーへの同意
    - **[必須]** パスワードリセット機能:
        - 登録メールアドレス宛に再設定用リンクを送信
    - **[必須]** 注文履歴の閲覧:
        - 過去の注文一覧、注文詳細（商品、金額、配送先、支払方法、注文ステータス）表示
    - **[推奨]** 再注文機能:
        - 過去の注文履歴から簡単に同じ商品をカートに追加できる機能
    - **[推奨]** 住所録機能:
        - 複数の配送先住所を登録・編集・削除可能
    - **[オプション]** 顧客ランク機能（VIP、一般など）:
        - 購入金額や頻度に応じてランクを設定
        - ランクに応じた特典（割引、ポイントアップなど）を提供（将来拡張）
    - **[オプション]** ポイント制度:
        - 購入金額に応じたポイント付与・利用
        - ポイント有効期限設定
- **提案時の考慮点**:
    - BtoB会員とBtoC会員で登録項目や利用可能機能が異なる場合があるため、アカウントタイプの区別を考慮します。
    - 個人情報保護法を遵守したデータ管理が必須。

---

### 3.5. 受注・発送管理機能（管理者向け）
- **概要**: 管理者が受注内容を確認・管理し、発送処理を行う。
- **詳細要件**:
    - **[必須]** 受注一覧の表示・検索:
        - 注文日、注文者名、注文ID、ステータスなどで検索・ソート可能
        - 一覧に必要な情報（注文概要、金額、顧客情報など）を表示
    - **[必須]** 受注詳細表示:
        - 注文商品、数量、金額、顧客情報、配送先情報、支払情報、承諾内容などを表示
    - **[必須]** 注文ステータス更新:
        - 例: 「新規受付」→「入金確認済」→「発送準備中」→「発送済」→「完了」など、手動または一部自動で更新
        - ステータス変更に応じた顧客への自動通知メール（詳細は3.8参照）
    - **[推奨]** 伝票番号入力、配送会社選択:
        - 発送時に配送業者の伝票番号を登録
        - 登録された伝票番号は顧客にも通知（追跡用）
    - **[推奨]** 納品書・請求書の個別発行・再発行（管理者操作）
    - **[オプション]** ピッキングリスト、梱包リストの出力機能
- **提案時の考慮点**:
    - 受注処理のワークフローを明確にし、管理画面のUIを最適化することで業務効率が向上します。
    - 建設資材は大型商品や重量物も多いため、配送に関する特記事項（チャーター便手配など）を記録できるメモ欄などがあると便利かもしれません。

---

### 3.6. 商品検索・フィルター機能・ランキング機能
- **概要**: ユーザーが大量の商品の中から目的の商品を探しやすくするための検索・絞り込み機能。
- **詳細要件**:
    - **[必須]** キーワード検索:
        - 商品名、商品説明、SKU、メーカー名などを対象とした検索
        - 複数キーワードによるAND/OR検索（初期はAND検索のみでも可）
    - **[推奨]** オートコンプリート機能:
        - 検索窓に文字入力中に候補をサジェスト表示
    - **[推奨]** カテゴリによる絞り込み:
        - 多階層カテゴリに対応
    - **[推奨]** 価格帯による絞り込み
    - **[推奨]** 並び替え機能:
        - 価格順（昇順/降順）、新着順、人気順（売上/閲覧数など）
    - **[オプション]** メーカー、ブランド、商品仕様（カスタム属性）による絞り込み（フィルター）
    - **[オプション]** トレンドキーワード表示機能
    - **[オプション]** 検索履歴表示機能（ログインユーザー向け）
    - **[オプション]** カテゴリ別ランキングや総合ランキング自動更新機能
- **提案時の考慮点**:
    - SKU数が4万点と非常に多いため、検索パフォーマンスと検索結果の精度がサイトの使い勝手を大きく左右します。
    - 建設資材特有の型番検索や専門用語での検索にも対応できるような仕組みを検討します（例：類義語辞書）。

---

### 3.7. コンテンツ管理機能（CMS）
- **概要**: お知らせやブログ、特集ページなどのコンテンツを管理。
- **詳細要件**:
    - **[必須]** お知らせの投稿・編集・削除:
        - タイトル、本文（リッチテキストエディタ）、公開日時設定
        - トップページなどへの新着お知らせ表示
    - **[必須]** 固定ページの編集:
        - 利用規約、会社概要、プライバシーポリシー、特定商取引法に基づく表記など
    - **[推奨]** SEO設定:
        - 各ページ（商品ページ、カテゴリページ、CMSページ）ごとにタイトルタグ、メタディスクリプション、キーワードを設定可能
    - **[オプション]** ブログ機能（記事投稿・カテゴリ分類・タグ付け）
    - **[オプション]** FAQページ作成・管理機能
- **提案時の考慮点**:
    - シンプルで直感的に操作できるCMSが望ましい。
    - SEO対策は集客において重要となるため、基本的な設定項目は網羅すべきです。

---

### 3.8. メール通知機能
- **概要**: 注文や会員登録など、特定のトリガーに応じてユーザーや管理者に自動でメールを送信する機能。
- **詳細要件**:
    - **[必須]** ユーザー向け通知メール:
        - 会員登録完了メール
        - 注文受付メール（注文内容確認）
        - 決済完了メール（銀行振込の場合は振込先案内など）
        - 発送完了通知メール（伝票番号含む）
        - パスワード再発行メール
        - 問い合わせ受付メール
    - **[必須]** 管理者向け通知メール:
        - 新規注文受付通知
        - 問い合わせ受付通知
        - （オプション）在庫僅少アラート
    - **[推奨]** メールテンプレート管理機能:
        - 各通知メールの件名、本文を管理画面から編集可能
        - 変数（顧客名、注文IDなど）を埋め込み可能
- **提案時の考慮点**:
    - メールの到達性を高めるため、専用のメール配信サービス（SendGrid, Amazon SESなど）の利用を推奨します。
    - メールの文面は、企業のブランドイメージに合わせ、丁寧かつ分かりやすいものにする必要があります。

---

### 3.9. 分析・レポート機能
- **概要**: 売上・商品・顧客のデータを可視化し、サイト運営の意思決定を支援する機能。
- **詳細要件**:
    - **[推奨]** 基本的なレポート表示（管理者向け）:
        - 期間別売上（日別、月別）
        - 商品別売上ランキング
        - 顧客ごとの購入履歴・購入金額（簡易的なもの）
    - **[推奨]** CSV出力機能:
        - 各種レポートデータをCSV形式でダウンロード可能にし、Excel等での詳細分析に対応
    - **[オプション]** Google Analyticsなどの外部アクセス解析ツールとの連携設定
    - **[オプション]** より高度な分析ダッシュボード（顧客セグメント分析、LTV分析など。将来拡張）
- **提案時の考慮点**:
    - 初期フェーズでは基本的なレポート機能に絞り、必要に応じて外部ツール連携やBIツール導入を検討するのが現実的です。
    - どのような指標を重視するかを事前に明確にすることが重要です。

---

### 3.10. セキュリティ・運用系
- **概要**: システムの安定運用や不正アクセス対策、情報漏洩防止のための機能。
- **詳細要件**:
    - **[必須]** SSL対応:
        - サイト全体の通信を暗号化（HTTPS）
    - **[必須]** 管理画面のセキュリティ:
        - ログイン認証（ID/パスワード）
        - （推奨）IPアドレス制限
        - （推奨）二要素認証
    - **[必須]** 管理者権限設定:
        - 複数の管理者アカウントを作成可能
        - アカウントごとに操作可能な機能範囲を設定（例: 商品管理担当、受注管理担当など）
    - **[必須]** パスワードポリシー設定:
        - 文字数、文字種などのパスワード強度要件
    - **[推奨]** 定期的なデータバックアップとリカバリ手順の確立
    - **[推奨]** XSS、SQLインジェクションなどの一般的なウェブ脆弱性対策
    - **[オプション]** 操作ログの記録（管理者操作、重要なデータ変更など）
- **提案時の考慮点**:
    - セキュリティ対策は継続的に見直し、アップデートが必要です。
    - 利用するクラウドプラットフォームやフレームワークが提供するセキュリティ機能を最大限活用します。

---

### 3.11. 特集ページ作成機能（CMS拡張）・お知らせ
- **概要**: 季節キャンペーンやセール等の特設ページを、管理画面から比較的自由に作成・編集できる機能。
- **詳細要件**:
    - **[推奨]** 特集ページ作成・編集:
        - テンプレートベースまたはブロックエディタ形式で、専門知識がなくてもページ構成を編集可能
        - 商品のピックアップ表示（特定の商品を選択して表示）
        - バナー画像掲載
        - 紹介文（リッチテキスト）編集
    - **[推奨]** 複数特集の同時運用・公開期間設定
    - **[推奨]** スマートフォン表示対応（レスポンシブデザイン）
    - **[推奨]** SEO設定（タイトル、ディスクリプション）
    - **[オプション]** プッシュ通知機能との連携（特集公開を通知）
- **提案時の考慮点**:
    - CMS機能の一部として提供するか、専用の機能として開発するかを検討。
    - 予算を抑える場合、既存のCMSプラグインやテーマのカスタマイズで対応することも考えられます。

---

### 3.12. 在庫連携機能（外部システム連携）
- **概要**: 外部の在庫管理システムと連携し、ECサイトの在庫情報をリアルタイムまたは定期的に同期する機能。
- **詳細要件**:
    - **[オプション/推奨（既存システムがある場合）]** 連携方式:
        - API連携（リアルタイム性が高いが、相手システムがAPIを提供している必要あり）
        - CSVファイルによるバッチ処理（定期的（例: 1日1回、1時間に1回など）に在庫情報を同期）
    - **[オプション/推奨]** 商品ごとの在庫数を自動反映
    - **[オプション/推奨]** 在庫切れ時のECサイト側での自動非表示または購入不可設定
    - **[オプション/推奨]** 連携エラー時の通知機能（管理者向け）
- **提案時の考慮点**:
    - 連携する外部システムの仕様（APIの有無、CSVフォーマットなど）を詳細に確認する必要があります。
    - リアルタイム連携は開発コストが高くなる傾向があるため、バッチ処理との費用対効果を比較検討します。

---

### 3.13. クーポン機能
- **概要**: 購入時に利用できる割引クーポンの発行・管理機能。
- **詳細要件**:
    - **[推奨]** クーポン発行・管理（管理者向け）:
        - クーポンコード（自動生成または任意設定）
        - 割引種別（定額割引、パーセンテージ割引）
        - 利用条件設定（最低購入金額、対象商品、対象カテゴリ、有効期間、利用回数制限（全体/ユーザーごと）など）
    - **[推奨]** クーポン利用（ユーザー向け）:
        - カート画面または注文確認画面でクーポンコードを入力
        - 適用可能なクーポンを自動表示する機能も検討
    - **[推奨]** 利用履歴の管理・集計（管理者向け）
- **提案時の考慮点**:
    - クーポンの種類や条件設定を柔軟に行えるようにすることで、多様な販促キャンペーンに対応できます。
    - 不正利用を防ぐための制御（例: 1人1回限りなど）も重要です。

---

### 3.14. メール配信機能（メルマガ）
- **概要**: 登録顧客に対してメールマガジンを配信したり、特定の顧客セグメントに合わせたメールを配信する機能。
- **詳細要件**:
    - **[オプション]** メールマガジン作成・配信:
        - HTMLメールエディタ
        - テキストメール作成
        - 配信リスト管理（購読希望者のみ）
        - スケジュール配信機能
    - **[オプション]** セグメント配信機能:
        - 顧客属性（購入履歴、登録日、会員ランクなど）に基づいて配信対象を絞り込み
    - **[オプション]** ステップメール機能:
        - 特定のアクション（例: 会員登録後3日、初回購入後7日など）をトリガーに自動でメールを段階的に配信
    - **[オプション]** クーポン連携機能（メルマガ限定クーポンの発行など）
    - **[オプション]** 開封率・クリック率などの効果測定機能
- **提案時の考慮点**:
    - 本格的なメールマーケティングを行う場合は、専用のMAツールやメール配信サービスの利用を推奨します。ECサイト側では、それらのツールと連携するための顧客データエクスポート機能などを提供する形も考えられます。
    - 特定電子メール法を遵守した運用（オプトイン、配信停止機能など）が必須です。

---

### 3.15. セット商品機能
- **概要**: 複数の商品を一つのセットとして組み合わせて販売可能にする機能。
- **詳細要件**:
    - **[オプション]** セット商品登録・管理（管理者向け）:
        - セット商品としての独自のSKU、商品名、価格設定
        - セットを構成する個別商品の選択と数量設定
    - **[オプション]** セット内容の個別在庫連携:
        - セット商品が購入された場合、構成する個別商品の在庫を減算
        - 構成商品の一つでも在庫切れの場合、セット商品を購入不可にする制御
    - **[オプション]** セット構成商品の詳細表示可否を設定可能
- **提案時の考慮点**:
    - 在庫管理が複雑になるため、設計を慎重に行う必要があります。
    - 例：「工具A + 部材Bセット」など、関連性の高い商品をまとめて提案することでアップセルを狙えます。

---

### 3.16. クイックオーダー機能（業務用・常連向け）
- **概要**: SKU（品番）や商品コードを指定して、複数の商品を一括でカートに追加したり注文したりできる仕組み。主にBtoB顧客やリピーター向け。
- **詳細要件**:
    - **[推奨（BtoB対応を重視する場合）]** 商品コード入力によるカート追加機能:
        - 専用ページで、商品コードと数量のリストを入力（例: CSVアップロード、テキストエリアへの貼り付け）
        - 入力された商品を一括でカートに追加
- **提案時の考慮点**:
    - 大量の型番商品を定期的に購入する法人顧客にとっては非常に便利な機能です。
    - UIはシンプルで高速な動作が求められます。

---

### 3.17. パーソナライズ機能
- **概要**: 顧客の行動履歴や属性に基づいて、おすすめ商品を表示するなど、個々の顧客に最適化された情報を提供する機能。
- **詳細要件**:
    - **[オプション]** 購入履歴に基づくレコメンド:
        - 「この商品を買った人はこんな商品も買っています」
        - 「あなたへのおすすめ商品」（過去の購入傾向から）
    - **[オプション]** 閲覧履歴からのリマインド:
        - 「最近見た商品」一覧表示
    - **[オプション]** カスタマイズしたトップページ表示:
        - 顧客属性（例: BtoB顧客向けに特定カテゴリを優先表示）や過去の行動に応じて、トップページの表示内容を一部変更
- **提案時の考慮点**:
    - 高度なパーソナライズはAIや機械学習の技術が必要となり、開発コスト・運用コストが増加します。初期は簡易的なロジック（例: 同じカテゴリの人気商品など）から始め、段階的に高度化することを検討します。
    - 外部のレコメンドエンジンの導入も選択肢の一つです。

---

### 3.18. BtoB（業務用販売）対応機能
- **概要**: 企業間取引（BtoB）に特化した機能を提供し、法人顧客の利便性を高める。
- **詳細要件**:
    - **[推奨]** 企業アカウント登録・管理:
        - 法人専用の登録フォーム（会社名、部署名、担当者名、法人番号など）
        - 承認フロー（管理者による確認後にアカウント有効化）
        - 複数担当者アカウントの紐付け（親アカウント・子アカウントのような構造も検討）
    - **[推奨]** 法人向け特別価格設定:
        - 顧客グループ（例: 一般法人、大口取引先など）ごとに異なる価格表を適用
        - 商品ごとに通常価格とは別に法人価格を設定
    - **[推奨]** 見積書発行機能:
        - カート内の商品を元に見積書（PDF形式）をオンラインで発行・ダウンロード可能
        - 見積もり有効期限設定
        - 見積もりから注文への連携
    - **[オプション]** 掛け払い（後払い）対応:
        - 外部のBtoB決済サービス（例: Paid, NP掛け払いなど）との連携が必要
    - **[オプション]** 注文単位での発注担当者情報記録
- **提案時の考慮点**:
    - BtoB取引では、価格体系、決済方法、承認フローなどがBtoCと大きく異なるため、専用の機能設計が重要です。
    - 建設業界の商習慣（例: 見積もり依頼の多さ、現場ごとの配送指定など）を考慮した機能が求められる場合があります。

---

### 3.19. レビュー投稿機能
- **概要**: 購入者が商品に対して評価やコメントを投稿できる機能。信頼性向上やUGC（User Generated Content）活用に繋げる。
- **詳細要件**:
    - **[推奨]** レビュー投稿:
        - 購入者のみレビュー投稿可能（システム的に購入履歴と紐付け）
        - ニックネーム設定（匿名性確保）
        - テキストレビュー入力
        - 評価（例: 1〜5つ星）
    - **[推奨]** レビュー表示:
        - 商品ページに該当商品のレビュー一覧を表示
        - 平均評価点の表示
        - （オプション）★4以上のレビューを優先表示、またはソート機能
    - **[必須]** レビュー管理（管理者向け）:
        - 不適切なレビュー（誹謗中傷、広告、個人情報など）の非表示・削除機能
        - レビューガイドラインページ作成・表示（ユーザーが確認可能）
    - **[オプション]** レビュー投稿に対するインセンティブ付与:
        - 例: レビュー投稿でクーポンやポイントを付与
    - **[オプション]** 管理者からのレビューへの返信機能
- **提案時の考慮点**:
    - レビューは購買意思決定に大きな影響を与えるため、信頼性を担保する仕組み（購入者限定など）が重要です。
    - 建設資材の場合、専門的な使用感や耐久性に関するレビューが有益となる可能性があります。

---

## 4. 非機能要件

### 4.1. パフォーマンス・可用性
- **目標**:
    - **ページ表示速度**:
        - トップページ、カテゴリページ: 2秒以内（95パーセンタイル）
        - 商品詳細ページ: 2.5秒以内（95パーセンタイル）
        - 検索結果ページ: 3秒以内（95パーセンタイル）
    - **レスポンス時間**:
        - API応答時間: 500ms以内（95パーセンタイル）
        - 検索API: 800ms以内（95パーセンタイル）
    - **スループット**:
        - ピーク時（1日のうち最も負荷の高い1時間）: 最大200リクエスト/秒の処理能力
        - 通常時: 50リクエスト/秒程度
    - **システム稼働率**: 99.5%以上（計画メンテナンス時間を除く）
        - 年間ダウンタイム: 最大43.8時間（99.5%の場合）
    - **バックアップからの復旧時間**: 4時間以内
- **考慮事項**:
    - SKU数が多いため、特に商品一覧ページや検索結果ページの表示速度に配慮する。
    - 画像ファイルの最適化（WebP形式の採用、適切なサイズ設定）
    - キャッシュ戦略の導入（CDN、アプリケーションキャッシュ、DBクエリキャッシュ）
    - データベースの適切なインデックス設計
    - 将来的なアクセス増に対応できるスケーラブルなインフラ構成を検討（水平スケーリング可能な設計）

### 4.2. セキュリティ
- **目標**:
    - 個人情報、決済情報の漏洩防止。
    - 不正アクセス、データ改ざんの防止。
    - インシデント発生時の迅速な検知と対応（24時間以内）
- **考慮事項**:
    - OWASP Top 10などの主要なウェブアプリケーション脆弱性への対策。
    - 四半期ごとのセキュリティ診断の実施。
    - パスワードの適切なハッシュ化と保存（bcryptなどの強力なアルゴリズムを使用）。
    - 決済情報は原則としてECサイト側で保持せず、決済代行サービスに委託する。
    - 全通信のHTTPS化（TLS 1.2以上）
    - セキュリティヘッダの適切な設定（Content-Security-Policy, X-XSS-Protection等）
    - 脆弱性発見時の対応プロセス策定

### 4.3. ユーザビリティ・アクセシビリティ
- **目標**:
    - 全てのユーザーが直感的かつ容易に操作できるインターフェース。
    - スマートフォン、タブレット、PCなど、多様なデバイスでの最適な表示と操作性（レスポンシブデザイン）。
    - WCAG 2.1 AAレベルへの準拠
- **考慮事項**:
    - WCAG (Web Content Accessibility Guidelines) の主要な達成基準に配慮（AAレベルを目標に）。
    - 建設業界のユーザー層（年齢層、ITリテラシー）を考慮したデザイン。
    - ナビゲーションの分かりやすさ、入力フォームの使いやすさ。
    - 画面遷移数の最小化（購入完了までのステップ数を3-4回に抑える）
    - 適切なフォントサイズとコントラスト比の確保
    - キーボード操作のサポート
    - スクリーンリーダー対応

### 4.4. 拡張性・保守性
- **目標**:
    - 将来的な機能追加や変更に柔軟に対応できるシステムアーキテクチャ。
    - システムの保守・運用が容易であること。
    - コードの再利用性を高め、重複を最小化すること。
- **考慮事項**:
    - モジュール化された設計、疎結合なコンポーネント。
    - APIベースのアーキテクチャの採用を検討。
    - コードの可読性、ドキュメントの整備。
    - 技術選定において、将来性やコミュニティの活発さも考慮。
    - コンテナ化技術（Docker等）の採用検討
    - CI/CDパイプラインの構築

### 4.5. 運用・監視
- **目標**:
    - システムの安定稼働と、障害発生時の迅速な検知・対応。
    - 主要指標のリアルタイムモニタリング。
- **考慮事項**:
    - サーバーリソース（CPU、メモリ、ディスク）、エラーログの監視。
    - アラート閾値の設定と通知システムの構築。
    - 定期的なバックアップ（日次）とリストア手順の確立。
    - メンテナンス計画とユーザーへの事前告知（計画停止は原則として深夜帯に実施）。
    - ログ集約・分析システムの導入
    - パフォーマンスメトリクスの収集と可視化

### 4.6. 法令遵守・コンプライアンス
- **目標**:
    - 個人情報保護法、特定商取引法、特定電子メール法、不正アクセス禁止法、その他関連法令の遵守。
    - インボイス制度への対応。
- **考慮事項**:
    - プライバシーポリシー、利用規約、特定商取引法に基づく表記の整備と明示。
    - 顧客データの適切な取り扱いと管理体制。
    - 個人情報取り扱いに関する内部監査の定期実施。
    - クッキーポリシーと同意取得の仕組み。

## 5. データ要件

### 5.1. 主要データ項目（概要）
- **商品データ**: 商品名, SKU, 価格, 在庫数, 商品説明, 画像, カテゴリ, メーカー, 各種属性, 中古品情報など。
- **顧客データ**:
    - BtoC: 氏名, 住所, 電話番号, メールアドレス, パスワード, 購入履歴, お気に入り, ポイントなど。
    - BtoB: 会社名, 部署名, 担当者名, 住所, 電話番号, メールアドレス, パスワード, 取引条件, 与信情報（連携する場合）, 見積履歴, 購入履歴など。
- **注文データ**: 注文ID, 注文日時, 顧客情報, 商品情報（品番, 単価, 数量）, 合計金額, 支払方法, 配送先情報, 注文ステータス, 承諾情報, 伝票番号など。
- **その他**: カテゴリマスタ, メーカーマスタ, クーポン情報, レビューデータ, CMSコンテンツ, 各種ログデータなど。

### 5.2. データ移行（既存システムがある場合）
#### 5.2.1. データ移行（既存システムがある場合）
- **商品データ移行**:
  - 対象: 商品基本情報、SKU情報、カテゴリ、画像、価格情報
  - 方法: 一括CSV取り込み機能により既存システムからエクスポートしたデータを取り込む
  - スケジュール: システム開発完了後、本番リリース前の準備期間中に実施
  - 検証: 移行後のデータ整合性チェック（件数確認、サンプルデータ目視確認）

- **顧客データ移行**（該当する場合）:
  - 対象: 顧客基本情報、購入履歴（必要な場合）
  - 方法: 匿名化またはセキュアな経路での移行
  - 個人情報保護法への配慮: 顧客への事前通知、同意取得の検討
  - スケジュール: システム開発完了後、本番リリース直前に実施

#### 5.2.2. 並行運用・切り替え計画
- **並行運用期間**: 1ヶ月程度（状況に応じて調整）
- **切り替え方法**: 
  - ソフトローンチ: 限定ユーザーによる試験運用（2週間）
  - フルローンチ: 全面切り替え
- **切り戻し計画**: 重大な問題発生時の旧システムへの切り戻し手順と判断基準

### 5.3. データバックアップ・リカバリ
- 定期的な自動バックアップ（例: 日次）。
- バックアップデータの世代管理。
- リストア手順の確立と定期的なテスト（推奨）。

## 6. 外部インターフェース要件

### 6.1. 決済システム連携
- **連携先**: クレジットカード決済代行サービス（Stripe, PayJPなど）、その他決済サービス。
- **連携方式**: API連携。
- **連携内容**: 決済要求、決済結果通知、売上確定、返金処理など。

### 6.2. 在庫管理システム連携（オプション）
- **連携先**: 既存または新規導入の外部在庫管理システム。
- **連携方式**: API連携またはCSVファイル連携。
- **連携内容**: 在庫情報の同期（ECサイト在庫→外部システム、外部システム在庫→ECサイト）。

### 6.3. 配送システム連携（オプション/将来拡張）
- **連携先**: 主要配送業者（ヤマト運輸, 佐川急便, 日本郵便など）のシステム。
- **連携方式**: API連携（提供されていれば）またはCSV連携。
- **連携内容**: 配送伝票番号発行、配送状況自動取得など。

### 6.4. 会計システム連携（オプション/将来拡張）
- **連携先**: 既存または新規導入の会計システム。
- **連携方式**: API連携またはCSVエクスポート/インポート。
- **連携内容**: 売上データ、仕入データ（該当する場合）の連携。

## 7. その他

### 7.1. 移行計画（概要）
#### 7.1.1. データ移行（既存システムがある場合）
- **商品データ移行**:
  - 対象: 商品基本情報、SKU情報、カテゴリ、画像、価格情報
  - 方法: 一括CSV取り込み機能により既存システムからエクスポートしたデータを取り込む
  - スケジュール: システム開発完了後、本番リリース前の準備期間中に実施
  - 検証: 移行後のデータ整合性チェック（件数確認、サンプルデータ目視確認）

- **顧客データ移行**（該当する場合）:
  - 対象: 顧客基本情報、購入履歴（必要な場合）
  - 方法: 匿名化またはセキュアな経路での移行
  - 個人情報保護法への配慮: 顧客への事前通知、同意取得の検討
  - スケジュール: システム開発完了後、本番リリース直前に実施

#### 7.1.2. 並行運用・切り替え計画
- **並行運用期間**: 1ヶ月程度（状況に応じて調整）
- **切り替え方法**: 
  - ソフトローンチ: 限定ユーザーによる試験運用（2週間）
  - フルローンチ: 全面切り替え
- **切り戻し計画**: 重大な問題発生時の旧システムへの切り戻し手順と判断基準

### 7.2. 運用体制（提案）
- サイト運営に必要な人員体制（商品登録、受注処理、顧客対応、コンテンツ更新など）について、お客様の現体制やご希望を伺いながら検討します。
- システム保守・運用体制（サーバー管理、障害対応、セキュリティアップデートなど）についても、SaaS利用か自社運用かなどにより提案内容が変わります。

### 7.3. 今後の進め方（提案）
1.  本要件定義書に基づくお見積もりの提示。
2.  ご契約。
3.  設計フェーズ（画面設計、DB設計、アーキテクチャ設計）。
4.  開発フェーズ。
5.  テストフェーズ。
6.  リリース・公開。
7.  運用・保守フェーズ。
各フェーズでお客様とのレビュー・確認を適宜実施します。

### 7.4. 想定されるリスクと対策（提案段階での一般的なもの）
| リスク                                     | 対策案                                                                 |
|--------------------------------------------|------------------------------------------------------------------------|
| 要件の変更・追加によるスコープ増大と納期遅延 | 定期的な進捗確認と変更管理プロセスの導入。優先順位付けによるスコープ調整。         |
| SKU数の多さによるパフォーマンス低下          | 効率的なDB設計、検索エンジンの導入検討、適切なインフラ選定。                 |
| 外部システム連携の複雑性                   | 事前の詳細な仕様確認、連携テストの十分な実施。段階的な連携導入も検討。         |
| セキュリティインシデントの発生             | セキュリティ対策の徹底、定期的な脆弱性診断、インシデント対応計画の策定。       |
| 予算超過                                   | MVPからの段階的開発、優先度の低い機能の延期、費用対効果の高い技術選定。        |

### 7.5. テスト要件と受け入れ基準
#### 7.5.1. テスト計画概要
- **単体テスト**: 各モジュール・機能の正常動作確認
  - 責任: 開発チーム
  - 実施タイミング: 機能実装完了ごと
  - 自動化: モジュールごとの自動テスト作成

- **結合テスト**: 複数の機能間の連携確認
  - 責任: 開発チーム
  - 実施タイミング: 機能群実装完了後
  - 主要シナリオ: 購入フロー、会員登録、商品検索など

- **システムテスト**: システム全体の機能・非機能要件充足確認
  - 責任: QAチーム
  - 実施タイミング: 全機能実装完了後
  - 範囲: 全機能・非機能要件の検証

- **ユーザー受け入れテスト(UAT)**: 実際のユーザーによる検証
  - 責任: お客様および運用担当者
  - 実施タイミング: システムテスト完了後
  - 内容: 実際の業務シナリオに基づく検証

- **パフォーマンステスト**: 負荷耐性の確認
  - 責任: 開発・インフラチーム
  - 実施タイミング: システムテスト完了後
  - ツール: JMeter等を使用した負荷シミュレーション

- **セキュリティテスト**: 脆弱性検査
  - 責任: セキュリティ専門チーム
  - 実施タイミング: システムテスト完了後
  - 範囲: OWASP Top 10ベースの脆弱性診断

#### 7.5.2. 受け入れ基準
- **機能要件**: 要件定義書に記載された全ての「必須」機能が正常に動作すること
- **パフォーマンス**: 4.1節に定義された目標値を満たすこと
- **セキュリティ**: 重大な脆弱性（OWASPのHigh/Critical）が検出されないこと
- **ユーザビリティ**: 主要ユーザーシナリオを問題なく完了できること
- **互換性**: 指定されたブラウザ・デバイスで正常に動作すること
  - サポートブラウザ: Google Chrome（最新2バージョン）、Safari（最新2バージョン）、Firefox（最新2バージョン）、Edge（最新2バージョン）
  - サポートデバイス: Windows PC、Mac、iOS（最新2バージョン）、Android（最新2バージョン）

## 8. 改訂履歴

| 版数  | 改訂日       | 改訂者       | 改訂内容                               |
|-------|--------------|--------------|----------------------------------------|
| 1.0   | YYYY-MM-DD   | (担当者名)   | 初版作成 (提案版)                      |
| 1.1   | YYYY-MM-DD   | (担当者名)   | MVP定義追加、非機能要件詳細化、テスト要件追加、移行計画拡充 |